# WebUI バックテスト2 推奨設定

## 問題解決後の推奨設定

### 1. 日付範囲
- **開始日**: 2024-01-01
- **終了日**: 2024-12-31
- ❌ 避けるべき: 2025年以降の未来日付

### 2. 初期資本とポジションサイズ
- **初期資本**: $100,000
- **最小取引サイズ**: $100（コードで$1,000から変更済み）
- **アグレッシブ上限**: 30%（0.3）
- **ニュートラル上限**: 20%（0.2）
- **保守的上限**: 10%（0.1）

### 3. LLM設定
#### モックモードでテスト（推奨）
- ✅ 「モックLLMを使用」にチェック
- LLMの問題を除外してシステムテスト

#### 本番モード
- **LLMプロバイダー**: OpenAI
- **ディープシンキングモデル**: gpt-4 または gpt-4-turbo
- **高速シンキングモデル**: gpt-3.5-turbo
- ❌ 避けるべき: 存在しないモデル名（o3-2025-04-16等）

### 4. エージェント設定
- **議論ラウンド数**: 1（最初は少なめに）
- **リスク評価ラウンド数**: 1
- **メモリを有効化**: ✅
- **リフレクションを有効化**: ✅

### 5. デバッグ設定
- **デバッグモードを有効化**: ✅（問題調査時）
- 正常動作確認後は無効化してパフォーマンス向上

### 6. 取引コスト
- **スリッページ**: 0.1%（0.001）
- **手数料**: 0.1%（0.001）

## トラブルシューティング

### 取引が0件の場合
1. モックモードで実行して基本動作を確認
2. 日付範囲を過去（2024年）に設定
3. 初期資本を増やす（$100,000以上）
4. ポジション上限を上げる（30%以上）

### エラーが発生する場合
1. WebUIサーバーを再起動
   ```bash
   pkill -f streamlit
   cd TradingMultiAgents && python -m streamlit run webui/app.py
   ```
2. デバッグモードを有効化
3. ログを確認

### パフォーマンスが遅い場合
1. 銘柄数を減らす（1-2銘柄でテスト）
2. 期間を短くする（1-3ヶ月）
3. 議論ラウンド数を減らす

## 成功の指標
- 取引件数: 月あたり5-20件が適切
- 最終リターン: -10%〜+10%が現実的
- エラーなしで完了