# 実行ログページ 使用ガイド

## 概要
TradingAgents WebUIの実行ログページでは、CLIと同等の詳細なログをリアルタイムで確認できます。

## 主な機能

### 1. リアルタイムログ表示
- 実行中の分析ログをリアルタイムで表示
- 自動スクロールでログを追従
- 1秒ごとに自動更新

### 2. ログフィルタリング
- **ログレベル**: TRACE, DEBUG, INFO, WARNING, ERROR, CRITICAL
- **エージェント**: 各分析エージェント別にフィルター
- **テキスト検索**: キーワードでログを検索
- **クイックフィルター**: エラーのみ、API呼び出しのみ

### 3. ログ管理
- **エクスポート**: TXT/JSON/CSV形式でダウンロード
- **クリア**: 表示中のログをクリア
- **一時停止/再開**: 自動更新の制御

### 4. 統計情報
- 総ログ数、エラー数、警告数
- API呼び出し回数
- 実行時間
- エラー分析

## 使用方法

### 基本的な使い方

1. **WebUIを起動**
   ```bash
   python run_webui.py
   ```

2. **「🔍 実行ログ」ページに移動**

3. **ログセッションを選択**
   - 最新の分析ログが自動的に表示されます
   - 実行中のセッションは「🔴 (実行中)」と表示

4. **ログを確認**
   - 自動スクロールでリアルタイムに更新
   - エラーは赤色でハイライト表示

### フィルタリング

#### ログレベルでフィルター
```
🔍 TRACE - 詳細なデバッグ情報
🐛 DEBUG - デバッグ情報
ℹ️ INFO - 一般的な情報
⚠️ WARNING - 警告
❌ ERROR - エラー
🚨 CRITICAL - 致命的エラー
```

#### エージェントでフィルター
- Market Analyst
- News Analyst
- Social Analyst
- Fundamentals Analyst
- Bull/Bear Researcher
- Risk Management Team
- Trader
- Portfolio Manager

#### テキスト検索
- 大文字小文字を区別しない検索
- ハイライト表示
- リアルタイムフィルタリング

### ログエクスポート

1. **「📥 エクスポート」ボタンをクリック**

2. **フォーマットを選択**
   - **TXT**: プレーンテキスト形式
   - **JSON**: 構造化データ形式
   - **CSV**: 表計算ソフト用

3. **「ダウンロード」をクリック**

### 高度な使い方

#### エラー診断
1. クイックフィルターで「❌ エラーのみ」を選択
2. エラーエントリーの詳細を展開
3. スタックトレースと行番号を確認

#### パフォーマンス分析
1. 「API呼び出し」でフィルター
2. API呼び出しの頻度とレスポンス時間を確認
3. ボトルネックを特定

#### 特定エージェントの追跡
1. エージェントフィルターで対象を選択
2. そのエージェントの処理フローを追跡
3. 問題箇所を特定

## ログフォーマット

### 標準フォーマット
```
[14:30:15.123] ℹ️ [Market Analyst] テクニカル分析を開始します
[14:30:16.456] 🐛 [API] FinnHub API呼び出し: /quote/AAPL
[14:30:17.789] ⚠️ [News Analyst] APIレート制限に近づいています
[14:30:20.012] ❌ [System] 接続エラー: タイムアウト
```

### ログエントリー構成
- **タイムスタンプ**: HH:MM:SS.mmm形式
- **ログレベルアイコン**: 視覚的識別
- **エージェント名**: 発生源の特定
- **メッセージ**: 詳細な情報

## トラブルシューティング

### ログが表示されない
1. ログセッションが選択されているか確認
2. フィルター設定を確認（全て非選択の可能性）
3. ログファイルの存在を確認

### 自動更新が機能しない
1. 「自動スクロール」がONになっているか確認
2. 実行中のセッションか確認
3. ブラウザのJavaScriptが有効か確認

### パフォーマンスが遅い
1. 表示ログ数が多すぎる場合はフィルターで絞る
2. 古いログセッションは削除
3. ブラウザキャッシュをクリア

## 技術仕様

### ログ保存場所
```
TradingMultiAgents/
└── logs/
    └── webui/
        └── analysis_TICKER_YYYYMMDD_HHMMSS.log
```

### 制限事項
- 最大表示行数: 1,000行（パフォーマンスのため）
- 自動更新間隔: 1秒
- ログ保持期間: 30日（自動削除可能）

### パフォーマンス最適化
- 仮想スクロール実装
- 差分更新
- メモリ使用量制限（100MB以下）

## キーボードショートカット（計画中）
- `Ctrl+F`: 検索
- `Ctrl+L`: ログクリア
- `Ctrl+E`: エクスポート
- `Space`: 自動スクロール切り替え

## 今後の機能追加予定

1. **ログパターン分析**
   - よくあるエラーパターンの検出
   - 異常検知

2. **可視化機能**
   - ログ統計グラフ
   - エージェント別実行時間

3. **アラート機能**
   - エラー発生時の通知
   - しきい値設定

4. **ログ管理**
   - 自動アーカイブ
   - 圧縮保存

---

質問や機能要望は、GitHubのIssueでお知らせください。