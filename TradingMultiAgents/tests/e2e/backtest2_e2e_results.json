{
  "timestamp": "2025-07-20T21:47:16.638119",
  "tests_run": 5,
  "tests_passed": 2,
  "results": {
    "test_minimal_backtest": {
      "status": "FAILED",
      "error": "'NoneType' object has no attribute 'timezone'"
    },
    "test_multi_ticker_backtest": {
      "status": "FAILED",
      "error": "'NoneType' object has no attribute 'timezone'"
    },
    "test_risk_profiles": {
      "status": "FAILED",
      "profiles_tested": 3,
      "profiles_passed": 0,
      "results": {
        "Conservative": {
          "error": "'NoneType' object has no attribute 'timezone'"
        },
        "Neutral": {
          "error": "'NoneType' object has no attribute 'timezone'"
        },
        "Aggressive": {
          "error": "'NoneType' object has no attribute 'timezone'"
        }
      }
    },
    "test_error_handling": {
      "status": "PASSED",
      "scenarios_tested": 3,
      "errors_handled": 3
    },
    "test_performance_benchmark": {
      "status": "PASSED",
      "benchmarks": {
        "Small (1 ticker, 30 days)": {
          "error": "'NoneType' object has no attribute 'timezone'"
        },
        "Medium (3 tickers, 60 days)": {
          "error": "'NoneType' object has no attribute 'timezone'"
        },
        "Large (5 tickers, 90 days)": {
          "error": "'NoneType' object has no attribute 'timezone'"
        }
      }
    }
  },
  "logs": [
    "[21:47:16] === Test 1: Minimal Backtest ===",
    "[21:47:16] Engine: Starting Backtest2 (Paper-compliant version)",
    "[21:47:16] Engine: Configuration: {\n  \"tickers\": [\n    \"AAPL\"\n  ],\n  \"start_date\": \"2025-06-20\",\n  \"end_date\": \"2025-07-19\",\n  \"initial_capital\": 10000.0,\n  \"slippage\": 0.001,\n  \"commission\": 0.001,\n  \"risk_free_rate\": 0.02,\n  \"aggressive_limit\": 0.3,\n  \"neutral_limit\": 0.2,\n  \"conservative_limit\": 0.1,\n  \"stop_loss\": 0.1,\n  \"take_profit\": 0.2,\n  \"max_positions\": 5,\n  \"agent_config\": {\n    \"llm_provider\": \"openai\",\n    \"temperature\": 0.7,\n    \"max_tokens\": 2000,\n    \"max_debate_rounds\": 1,\n    \"max_risk_rounds\": 1,\n    \"use_japanese\": false,\n    \"online_tools\": false\n  },\n  \"enable_memory\": true,\n  \"enable_reflection\": true,\n  \"immediate_reflection\": true,\n  \"force_refresh\": false,\n  \"generate_plots\": true,\n  \"save_trades\": true,\n  \"debug\": true\n}",
    "[21:47:16] Progress: 0.0% - Processing AAPL - AAPL",
    "[21:47:16] Engine: Starting backtest for AAPL",
    "[21:47:16] Engine: Error: 'NoneType' object has no attribute 'timezone'",
    "[21:47:16] Test failed: 'NoneType' object has no attribute 'timezone'",
    "[21:47:16] \n=== Test 2: Multi-Ticker Backtest ===",
    "[21:47:16] Engine: Starting Backtest2 (Paper-compliant version)",
    "[21:47:16] Engine: Configuration: {\n  \"tickers\": [\n    \"AAPL\",\n    \"MSFT\",\n    \"GOOGL\"\n  ],\n  \"start_date\": \"2025-05-21\",\n  \"end_date\": \"2025-07-19\",\n  \"initial_capital\": 50000.0,\n  \"slippage\": 0.001,\n  \"commission\": 0.001,\n  \"risk_free_rate\": 0.02,\n  \"aggressive_limit\": 0.4,\n  \"neutral_limit\": 0.25,\n  \"conservative_limit\": 0.15,\n  \"stop_loss\": 0.08,\n  \"take_profit\": 0.25,\n  \"max_positions\": 10,\n  \"agent_config\": {\n    \"llm_provider\": \"openai\",\n    \"temperature\": 0.7,\n    \"max_tokens\": 2000,\n    \"max_debate_rounds\": 2,\n    \"max_risk_rounds\": 1,\n    \"use_japanese\": false,\n    \"online_tools\": false\n  },\n  \"enable_memory\": true,\n  \"enable_reflection\": true,\n  \"immediate_reflection\": false,\n  \"force_refresh\": false,\n  \"generate_plots\": false,\n  \"save_trades\": true,\n  \"debug\": false\n}",
    "[21:47:16] Progress: 0.0% - Processing AAPL - AAPL",
    "[21:47:16] Engine: Starting backtest for AAPL",
    "[21:47:16] Engine: Error: 'NoneType' object has no attribute 'timezone'",
    "[21:47:16] Test failed: 'NoneType' object has no attribute 'timezone'",
    "[21:47:16] \n=== Test 3: Risk Profiles ===",
    "[21:47:16] \nTesting Conservative profile...",
    "[21:47:16] Engine: Starting Backtest2 (Paper-compliant version)",
    "[21:47:16] Engine: Configuration: {\n  \"tickers\": [\n    \"SPY\"\n  ],\n  \"start_date\": \"2025-06-05\",\n  \"end_date\": \"2025-07-19\",\n  \"initial_capital\": 25000.0,\n  \"slippage\": 0.001,\n  \"commission\": 0.001,\n  \"risk_free_rate\": 0.02,\n  \"stop_loss\": 0.1,\n  \"take_profit\": 0.2,\n  \"max_positions\": 5,\n  \"agent_config\": {\n    \"llm_provider\": \"openai\",\n    \"temperature\": 0.7,\n    \"max_tokens\": 1500,\n    \"max_debate_rounds\": 1,\n    \"max_risk_rounds\": 1,\n    \"use_japanese\": false,\n    \"online_tools\": false\n  },\n  \"enable_memory\": false,\n  \"enable_reflection\": false,\n  \"immediate_reflection\": false,\n  \"force_refresh\": false,\n  \"generate_plots\": false,\n  \"save_trades\": false,\n  \"debug\": false,\n  \"name\": \"Conservative\",\n  \"aggressive_limit\": 0.1,\n  \"neutral_limit\": 0.05,\n  \"conservative_limit\": 0.02\n}",
    "[21:47:16] Progress: 0.0% - Processing SPY - SPY",
    "[21:47:16] Engine: Starting backtest for SPY",
    "[21:47:16] Engine: Error: 'NoneType' object has no attribute 'timezone'",
    "[21:47:16] Conservative test failed: 'NoneType' object has no attribute 'timezone'",
    "[21:47:16] \nTesting Neutral profile...",
    "[21:47:16] Engine: Starting Backtest2 (Paper-compliant version)",
    "[21:47:16] Engine: Configuration: {\n  \"tickers\": [\n    \"SPY\"\n  ],\n  \"start_date\": \"2025-06-05\",\n  \"end_date\": \"2025-07-19\",\n  \"initial_capital\": 25000.0,\n  \"slippage\": 0.001,\n  \"commission\": 0.001,\n  \"risk_free_rate\": 0.02,\n  \"stop_loss\": 0.1,\n  \"take_profit\": 0.2,\n  \"max_positions\": 5,\n  \"agent_config\": {\n    \"llm_provider\": \"openai\",\n    \"temperature\": 0.7,\n    \"max_tokens\": 1500,\n    \"max_debate_rounds\": 1,\n    \"max_risk_rounds\": 1,\n    \"use_japanese\": false,\n    \"online_tools\": false\n  },\n  \"enable_memory\": false,\n  \"enable_reflection\": false,\n  \"immediate_reflection\": false,\n  \"force_refresh\": false,\n  \"generate_plots\": false,\n  \"save_trades\": false,\n  \"debug\": false,\n  \"name\": \"Neutral\",\n  \"aggressive_limit\": 0.3,\n  \"neutral_limit\": 0.2,\n  \"conservative_limit\": 0.1\n}",
    "[21:47:16] Progress: 0.0% - Processing SPY - SPY",
    "[21:47:16] Engine: Starting backtest for SPY",
    "[21:47:16] Engine: Error: 'NoneType' object has no attribute 'timezone'",
    "[21:47:16] Neutral test failed: 'NoneType' object has no attribute 'timezone'",
    "[21:47:16] \nTesting Aggressive profile...",
    "[21:47:16] Engine: Starting Backtest2 (Paper-compliant version)",
    "[21:47:16] Engine: Configuration: {\n  \"tickers\": [\n    \"SPY\"\n  ],\n  \"start_date\": \"2025-06-05\",\n  \"end_date\": \"2025-07-19\",\n  \"initial_capital\": 25000.0,\n  \"slippage\": 0.001,\n  \"commission\": 0.001,\n  \"risk_free_rate\": 0.02,\n  \"stop_loss\": 0.1,\n  \"take_profit\": 0.2,\n  \"max_positions\": 5,\n  \"agent_config\": {\n    \"llm_provider\": \"openai\",\n    \"temperature\": 0.7,\n    \"max_tokens\": 1500,\n    \"max_debate_rounds\": 1,\n    \"max_risk_rounds\": 1,\n    \"use_japanese\": false,\n    \"online_tools\": false\n  },\n  \"enable_memory\": false,\n  \"enable_reflection\": false,\n  \"immediate_reflection\": false,\n  \"force_refresh\": false,\n  \"generate_plots\": false,\n  \"save_trades\": false,\n  \"debug\": false,\n  \"name\": \"Aggressive\",\n  \"aggressive_limit\": 0.6,\n  \"neutral_limit\": 0.4,\n  \"conservative_limit\": 0.2\n}",
    "[21:47:16] Progress: 0.0% - Processing SPY - SPY",
    "[21:47:16] Engine: Starting backtest for SPY",
    "[21:47:16] Engine: Error: 'NoneType' object has no attribute 'timezone'",
    "[21:47:16] Aggressive test failed: 'NoneType' object has no attribute 'timezone'",
    "[21:47:16] \n=== Test 4: Error Handling ===",
    "[21:47:16] \nTesting: Invalid ticker",
    "[21:47:16] Engine: Starting Backtest2 (Paper-compliant version)",
    "[21:47:16] Engine: Configuration: {\n  \"tickers\": [\n    \"INVALID_TICKER_12345\"\n  ],\n  \"start_date\": \"2024-01-01\",\n  \"end_date\": \"2024-01-31\",\n  \"initial_capital\": 10000.0,\n  \"slippage\": 0.001,\n  \"commission\": 0.001,\n  \"risk_free_rate\": 0.02,\n  \"aggressive_limit\": 0.3,\n  \"neutral_limit\": 0.2,\n  \"conservative_limit\": 0.1,\n  \"stop_loss\": 0.1,\n  \"take_profit\": 0.2,\n  \"max_positions\": 5,\n  \"agent_config\": {\n    \"llm_provider\": \"openai\",\n    \"temperature\": 0.7,\n    \"max_tokens\": 1000,\n    \"max_debate_rounds\": 1,\n    \"max_risk_rounds\": 1,\n    \"use_japanese\": false,\n    \"online_tools\": false\n  },\n  \"enable_memory\": false,\n  \"enable_reflection\": false,\n  \"immediate_reflection\": false,\n  \"force_refresh\": false,\n  \"generate_plots\": false,\n  \"save_trades\": false,\n  \"debug\": false\n}",
    "[21:47:16] Progress: 0.0% - Processing INVALID_TICKER_12345 - INVALID_TICKER_12345",
    "[21:47:16] Engine: Starting backtest for INVALID_TICKER_12345",
    "[21:47:16] Engine: Error: 'NoneType' object has no attribute 'timezone'",
    "[21:47:16] Error handled correctly: 'NoneType' object has no attribute 'timezone'",
    "[21:47:16] \nTesting: Invalid date range",
    "[21:47:16] Engine: Starting Backtest2 (Paper-compliant version)",
    "[21:47:16] Engine: Configuration: {\n  \"tickers\": [\n    \"AAPL\"\n  ],\n  \"start_date\": \"2024-01-31\",\n  \"end_date\": \"2024-01-01\",\n  \"initial_capital\": 10000.0,\n  \"slippage\": 0.001,\n  \"commission\": 0.001,\n  \"risk_free_rate\": 0.02,\n  \"aggressive_limit\": 0.3,\n  \"neutral_limit\": 0.2,\n  \"conservative_limit\": 0.1,\n  \"stop_loss\": 0.1,\n  \"take_profit\": 0.2,\n  \"max_positions\": 5,\n  \"agent_config\": {\n    \"llm_provider\": \"openai\",\n    \"temperature\": 0.7,\n    \"max_tokens\": 1000,\n    \"max_debate_rounds\": 1,\n    \"max_risk_rounds\": 1,\n    \"use_japanese\": false,\n    \"online_tools\": false\n  },\n  \"enable_memory\": false,\n  \"enable_reflection\": false,\n  \"immediate_reflection\": false,\n  \"force_refresh\": false,\n  \"generate_plots\": false,\n  \"save_trades\": false,\n  \"debug\": false\n}",
    "[21:47:16] Engine: Error: Start date must be before end date",
    "[21:47:16] Error handled correctly: Start date must be before end date",
    "[21:47:16] \nTesting: Zero capital",
    "[21:47:16] Engine: Starting Backtest2 (Paper-compliant version)",
    "[21:47:16] Engine: Configuration: {\n  \"tickers\": [\n    \"AAPL\"\n  ],\n  \"start_date\": \"2024-01-01\",\n  \"end_date\": \"2024-01-31\",\n  \"initial_capital\": 0,\n  \"slippage\": 0.001,\n  \"commission\": 0.001,\n  \"risk_free_rate\": 0.02,\n  \"aggressive_limit\": 0.3,\n  \"neutral_limit\": 0.2,\n  \"conservative_limit\": 0.1,\n  \"stop_loss\": 0.1,\n  \"take_profit\": 0.2,\n  \"max_positions\": 5,\n  \"agent_config\": {\n    \"llm_provider\": \"openai\",\n    \"temperature\": 0.7,\n    \"max_tokens\": 1000,\n    \"max_debate_rounds\": 1,\n    \"max_risk_rounds\": 1,\n    \"use_japanese\": false,\n    \"online_tools\": false\n  },\n  \"enable_memory\": false,\n  \"enable_reflection\": false,\n  \"immediate_reflection\": false,\n  \"force_refresh\": false,\n  \"generate_plots\": false,\n  \"save_trades\": false,\n  \"debug\": false\n}",
    "[21:47:16] Progress: 0.0% - Processing AAPL - AAPL",
    "[21:47:16] Engine: Starting backtest for AAPL",
    "[21:47:16] Engine: Error: Initial capital must be positive",
    "[21:47:16] Error handled correctly: Initial capital must be positive",
    "[21:47:16] \n=== Test 5: Performance Benchmark ===",
    "[21:47:16] \nRunning benchmark: Small (1 ticker, 30 days)",
    "[21:47:16] Engine: Starting Backtest2 (Paper-compliant version)",
    "[21:47:16] Engine: Configuration: {\n  \"tickers\": [\n    \"AAPL\"\n  ],\n  \"start_date\": \"2025-06-20\",\n  \"end_date\": \"2025-07-19\",\n  \"initial_capital\": 100000.0,\n  \"slippage\": 0.001,\n  \"commission\": 0.001,\n  \"risk_free_rate\": 0.02,\n  \"aggressive_limit\": 0.3,\n  \"neutral_limit\": 0.2,\n  \"conservative_limit\": 0.1,\n  \"stop_loss\": 0.1,\n  \"take_profit\": 0.2,\n  \"max_positions\": 10,\n  \"agent_config\": {\n    \"llm_provider\": \"openai\",\n    \"temperature\": 0.7,\n    \"max_tokens\": 1000,\n    \"max_debate_rounds\": 1,\n    \"max_risk_rounds\": 1,\n    \"use_japanese\": false,\n    \"online_tools\": false\n  },\n  \"enable_memory\": false,\n  \"enable_reflection\": false,\n  \"immediate_reflection\": false,\n  \"force_refresh\": false,\n  \"generate_plots\": false,\n  \"save_trades\": false,\n  \"debug\": false\n}",
    "[21:47:16] Progress: 0.0% - Processing AAPL - AAPL",
    "[21:47:16] Engine: Starting backtest for AAPL",
    "[21:47:16] Engine: Error: 'NoneType' object has no attribute 'timezone'",
    "[21:47:16] Benchmark failed: 'NoneType' object has no attribute 'timezone'",
    "[21:47:16] \nRunning benchmark: Medium (3 tickers, 60 days)",
    "[21:47:16] Engine: Starting Backtest2 (Paper-compliant version)",
    "[21:47:16] Engine: Configuration: {\n  \"tickers\": [\n    \"AAPL\",\n    \"MSFT\",\n    \"GOOGL\"\n  ],\n  \"start_date\": \"2025-05-21\",\n  \"end_date\": \"2025-07-19\",\n  \"initial_capital\": 100000.0,\n  \"slippage\": 0.001,\n  \"commission\": 0.001,\n  \"risk_free_rate\": 0.02,\n  \"aggressive_limit\": 0.3,\n  \"neutral_limit\": 0.2,\n  \"conservative_limit\": 0.1,\n  \"stop_loss\": 0.1,\n  \"take_profit\": 0.2,\n  \"max_positions\": 10,\n  \"agent_config\": {\n    \"llm_provider\": \"openai\",\n    \"temperature\": 0.7,\n    \"max_tokens\": 1000,\n    \"max_debate_rounds\": 1,\n    \"max_risk_rounds\": 1,\n    \"use_japanese\": false,\n    \"online_tools\": false\n  },\n  \"enable_memory\": false,\n  \"enable_reflection\": false,\n  \"immediate_reflection\": false,\n  \"force_refresh\": false,\n  \"generate_plots\": false,\n  \"save_trades\": false,\n  \"debug\": false\n}",
    "[21:47:16] Progress: 0.0% - Processing AAPL - AAPL",
    "[21:47:16] Engine: Starting backtest for AAPL",
    "[21:47:16] Engine: Error: 'NoneType' object has no attribute 'timezone'",
    "[21:47:16] Benchmark failed: 'NoneType' object has no attribute 'timezone'",
    "[21:47:16] \nRunning benchmark: Large (5 tickers, 90 days)",
    "[21:47:16] Engine: Starting Backtest2 (Paper-compliant version)",
    "[21:47:16] Engine: Configuration: {\n  \"tickers\": [\n    \"AAPL\",\n    \"MSFT\",\n    \"GOOGL\",\n    \"AMZN\",\n    \"META\"\n  ],\n  \"start_date\": \"2025-04-21\",\n  \"end_date\": \"2025-07-19\",\n  \"initial_capital\": 100000.0,\n  \"slippage\": 0.001,\n  \"commission\": 0.001,\n  \"risk_free_rate\": 0.02,\n  \"aggressive_limit\": 0.3,\n  \"neutral_limit\": 0.2,\n  \"conservative_limit\": 0.1,\n  \"stop_loss\": 0.1,\n  \"take_profit\": 0.2,\n  \"max_positions\": 10,\n  \"agent_config\": {\n    \"llm_provider\": \"openai\",\n    \"temperature\": 0.7,\n    \"max_tokens\": 1000,\n    \"max_debate_rounds\": 1,\n    \"max_risk_rounds\": 1,\n    \"use_japanese\": false,\n    \"online_tools\": false\n  },\n  \"enable_memory\": false,\n  \"enable_reflection\": false,\n  \"immediate_reflection\": false,\n  \"force_refresh\": false,\n  \"generate_plots\": false,\n  \"save_trades\": false,\n  \"debug\": false\n}",
    "[21:47:16] Progress: 0.0% - Processing AAPL - AAPL",
    "[21:47:16] Engine: Starting backtest for AAPL",
    "[21:47:16] Engine: Error: 'NoneType' object has no attribute 'timezone'",
    "[21:47:16] Benchmark failed: 'NoneType' object has no attribute 'timezone'"
  ]
}